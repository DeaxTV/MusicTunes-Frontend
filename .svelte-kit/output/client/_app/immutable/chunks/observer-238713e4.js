let r;const c=(t,n)=>{for(let e=0;e<t.length;e++){const s=t[e],o=s.target;s.isIntersecting&&o.decode().finally(()=>{o.src=o.dataset.src,o.decode().finally(()=>{r.unobserve(s.target)})})}};function i(t){if(!r)return r=new IntersectionObserver(c,{threshold:0,rootMargin:"95px 80px"}),r}function l(t){i();let n=t.querySelectorAll("img[data-src]");for(const e of n)queueMicrotask(()=>{r.observe(e)});return{destroy(){for(const e of n)r.unobserve(e);n=null}}}export{l};
