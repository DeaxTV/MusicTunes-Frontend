import { S as Ge, i as Je, s as Ue, w as Y, a as je, k as Ke, x as Z, c as Fe, l as Qe, m as We, h as W, n as Ye, y as ee, b as qe, I as Ze, f as P, d as et, t as K, z as te, a1 as tt, V as nt, B as it, g as at } from "../../../chunks/index-02d4e276.js"; import { L as st } from "../../../chunks/ListItem-813988b5.js"; import { N as ot, J as rt, C as lt, l as Q } from "../../../chunks/window-19724ee6.js"; import { I as dt } from "../../../chunks/InfoBox-2d54b9a8.js"; import { p as ut } from "../../../chunks/stores-5cf8d32a.js"; import { H as pt } from "../../../chunks/Header-0fc5aced.js"; import { C as ct, r as mt } from "../../../chunks/contexts-267137aa.js"; const gt = /=w\d+-h\d+-/gm; function ht(e) { const a = { url: "", placeholder: "" }; if (!e.includes("lh3.googleusercontent.com")) { const t = e.split("?")[0]; return a.url = t, a.placeholder = t == null ? void 0 : t.replace("sddefault", "default"), a } const o = e == null ? void 0 : e.replace("-rj", "-rw"); return a.url = o, a.placeholder = o == null ? void 0 : o.replace(gt, "=w1-h1-fSoften=50,50,05-"), a } function yt(e) { var s, t, g; const a = e.length; let o = -1; for (; ++o < a;) { const u = e[o]; if (u.navigationEndpoint === void 0) { e[o] = u; continue } e[o] = { text: u.text, browseId: (s = u.navigationEndpoint.browseEndpoint) == null ? void 0 : s.browseId, pageType: (g = (t = u.navigationEndpoint.browseEndpoint.browseEndpointContextSupportedConfigs) == null ? void 0 : t.browseEndpointContextMusicConfig) == null ? void 0 : g.pageType } } return e } function ft(e, a, o, s = void 0) { var i, r, c, l, y, v, w, E, f, _, C, $, x, S, T, A, D, H, L, B, k, M, N, O, V, j, F, q, X, z, G, J, U, h, I, R, ne, ie, ae, se, oe, re, le, de, ue, pe, ce, me, ge, he, ye, fe, be, Ee, Ie, Re, ve, we, Pe, _e, Ce, $e, xe, Se, Te, Ae, De, He, Le, Be, ke, Me, Ne, Oe; const t = e.musicResponsiveListItemRenderer, g = (((c = (r = (i = t.thumbnail) == null ? void 0 : i.musicThumbnailRenderer) == null ? void 0 : r.thumbnail) == null ? void 0 : c.thumbnails) || []).map(Ve => ({ ...Ve, ...ht(Ve.url) })), u = Array.isArray(t.flexColumns) && t.flexColumns, m = (v = (y = (l = u[1]) == null ? void 0 : l.musicResponsiveListItemFlexColumnRenderer) == null ? void 0 : y.text) == null ? void 0 : v.runs, n = ((f = (E = (w = u[0]) == null ? void 0 : w.musicResponsiveListItemFlexColumnRenderer) == null ? void 0 : E.text) == null ? void 0 : f.runs[0]) || {}, b = Array.isArray(m) && yt(m), d = (_ = t.navigationEndpoint) == null ? void 0 : _.browseEndpoint, p = Object.create(null); return Object.assign(p, { subtitle: b, artistInfo: { artist: [b[0]] }, explicit: "badges" in t, title: n.text, aspectRatio: t.flexColumnDisplayStyle, musicVideoType: ((x = ($ = (C = n.navigationEndpoint) == null ? void 0 : C.watchEndpoint) == null ? void 0 : $.watchEndpointMusicConfig) == null ? void 0 : x.musicVideoType) ?? ((D = (A = (T = (S = n.navigationEndpoint) == null ? void 0 : S.watchEndpoint) == null ? void 0 : T.watchEndpointMusicSupportedConfigs) == null ? void 0 : A.watchEndpointMusicConfig) == null ? void 0 : D.musicVideoType), videoId: ((L = (H = n.navigationEndpoint) == null ? void 0 : H.watchEndpoint) == null ? void 0 : L.videoId) ?? void 0, playlistId: (k = (B = n.navigationEndpoint) == null ? void 0 : B.watchEndpoint) != null && k.playlistId ? (N = (M = n == null ? void 0 : n.navigationEndpoint) == null ? void 0 : M.watchEndpoint) == null ? void 0 : N.playlistId : (F = (j = (V = (O = t.menu) == null ? void 0 : O.menuRenderer.items[0].menuNavigationItemRenderer) == null ? void 0 : V.navigationEndpoint) == null ? void 0 : j.watchEndpoint) != null && F.playlistId ? (J = (G = (z = (X = (q = t.menu) == null ? void 0 : q.menuRenderer) == null ? void 0 : X.items[0]) == null ? void 0 : z.menuNavigationItemRenderer.navigationEndpoint) == null ? void 0 : G.watchEndpoint) == null ? void 0 : J.playlistId : (U = t == null ? void 0 : t.watchEndpoint) == null ? void 0 : U.playlistId, thumbnails: g, length: "fixedColumns" in t && ((ne = (R = (I = (h = t.fixedColumns[0]) == null ? void 0 : h.musicResponsiveListItemFixedColumnRenderer) == null ? void 0 : I.text) == null ? void 0 : R.runs) != null && ne.length) ? (oe = (se = (ae = (ie = t.fixedColumns[0]) == null ? void 0 : ie.musicResponsiveListItemFixedColumnRenderer) == null ? void 0 : ae.text) == null ? void 0 : se.runs[0]) == null ? void 0 : oe.text : void 0, type: s, params: ((ce = (pe = (ue = (de = (le = (re = t.overlay) == null ? void 0 : re.musicItemThumbnailOverlayRenderer) == null ? void 0 : le.content) == null ? void 0 : de.musicPlayButtonRenderer) == null ? void 0 : ue.playNavigationEndpoint) == null ? void 0 : pe.watchPlaylistEndpoint) == null ? void 0 : ce.params) ?? void 0, playerParams: ((ge = (me = n == null ? void 0 : n.navigationEndpoint) == null ? void 0 : me.watchEndpoint) == null ? void 0 : ge.playerParams) || ((ye = (he = n == null ? void 0 : n.navigationEndpoint) == null ? void 0 : he.watchEndpoint) == null ? void 0 : ye.params), clickTrackingParams: ((Re = (Ie = (Ee = (be = (fe = t.overlay) == null ? void 0 : fe.musicItemThumbnailOverlayRenderer) == null ? void 0 : be.content) == null ? void 0 : Ee.musicPlayButtonRenderer) == null ? void 0 : Ie.playNavigationEndpoint) == null ? void 0 : Re.clickTrackingParams) || ((ve = n == null ? void 0 : n.navigationEndpoint) == null ? void 0 : ve.clickTrackingParams), loggingContext: (xe = ($e = (Ce = (_e = (Pe = (we = t.overlay) == null ? void 0 : we.musicItemThumbnailOverlayRenderer) == null ? void 0 : Pe.content) == null ? void 0 : _e.musicPlayButtonRenderer) == null ? void 0 : Ce.playNavigationEndpoint) == null ? void 0 : $e.watchEndpoint) == null ? void 0 : xe.loggingContext }), d && (p.endpoint = { browseId: d.browseId, pageType: d.browseEndpointContextSupportedConfigs.browseEndpointContextMusicConfig.pageType }), p !== void 0 && a && Object.assign(p, { playlistSetVideoId: (t == null ? void 0 : t.playlistSetVideoId) || ((He = (De = (Ae = (Te = (Se = t.overlay) == null ? void 0 : Se.musicItemThumbnailOverlayRenderer.content) == null ? void 0 : Te.musicPlayButtonRenderer) == null ? void 0 : Ae.playNavigationEndpoint) == null ? void 0 : De.watchEndpoint) == null ? void 0 : He.playlistSetVideoId), playlistId: o }), Array.isArray(p.subtitle) && p.subtitle[0].text === "Artist" && Object.assign(p, { artistInfo: { artist: [{ pageType: (Me = (ke = (Be = (Le = t.navigationEndpoint) == null ? void 0 : Le.browseEndpoint) == null ? void 0 : Be.browseEndpointContextSupportedConfigs) == null ? void 0 : ke.browseEndpointContextMusicConfig) == null ? void 0 : Me.pageType, browseId: (Oe = (Ne = t == null ? void 0 : t.navigationEndpoint) == null ? void 0 : Ne.browseEndpoint) == null ? void 0 : Oe.browseId }] } }), p } function bt(e) { var g, u; const a = ((u = (g = e.contents) == null ? void 0 : g.singleColumnBrowseResultsRenderer) == null ? void 0 : u.tabs[0].tabRenderer.content.sectionListRenderer.contents[0].musicShelfRenderer.contents) || [], o = ot(a, ({ musicResponsiveListItemRenderer: m }, n) => ({ ...ft({ musicResponsiveListItemRenderer: m }), index: n })), t = (() => { var d, p, i, r, c, l, y, v, w, E, f, _, C, $, x, S, T, A, D, H, L, B, k, M, N, O, V, j, F, q, X, z, G, J, U; console.log(e.header.musicDetailHeaderRenderer.subtitle.runs); const m = (i = (p = (d = e.header) == null ? void 0 : d.musicDetailHeaderRenderer) == null ? void 0 : p.subtitle) == null ? void 0 : i.runs.at(-1), n = (l = (c = (r = e.header) == null ? void 0 : r.musicDetailHeaderRenderer) == null ? void 0 : c.subtitle) == null ? void 0 : l.runs[0], b = rt((w = (v = (y = e.header) == null ? void 0 : y.musicDetailHeaderRenderer) == null ? void 0 : v.subtitle) == null ? void 0 : w.runs, h => { var I, R; return !!((R = (I = h == null ? void 0 : h.navigationEndpoint) == null ? void 0 : I.browseEndpoint) != null && R.browseId) }).map(h => { var I, R; return { name: h.text, channelId: ((R = (I = h == null ? void 0 : h.navigationEndpoint) == null ? void 0 : I.browseEndpoint) == null ? void 0 : R.browseId) || "" } }); return { playlistId: (_ = (f = (E = e.header) == null ? void 0 : E.musicDetailHeaderRenderer.menu) == null ? void 0 : f.menuRenderer) == null ? void 0 : _.topLevelButtons[0].buttonRenderer.navigationEndpoint.watchPlaylistEndpoint.playlistId, subtitles: [{ year: m.text, tracks: (x = ($ = (C = e.header) == null ? void 0 : C.musicDetailHeaderRenderer) == null ? void 0 : $.secondSubtitle) == null ? void 0 : x.runs[0].text, length: (D = (A = (T = (S = e.header) == null ? void 0 : S.musicDetailHeaderRenderer) == null ? void 0 : T.secondSubtitle) == null ? void 0 : A.runs[2]) == null ? void 0 : D.text, type: n.text, contentRating: !!((L = (H = e.header) == null ? void 0 : H.musicDetailHeaderRenderer) != null && L.hasOwnProperty("subtitleBadges")) }], secondSubtitle: [], artist: b, thumbnails: (O = (N = (M = (k = (B = e.header) == null ? void 0 : B.musicDetailHeaderRenderer) == null ? void 0 : k.thumbnail) == null ? void 0 : M.croppedSquareThumbnailRenderer) == null ? void 0 : N.thumbnail) == null ? void 0 : O.thumbnails, title: (j = (V = e.header) == null ? void 0 : V.musicDetailHeaderRenderer.title) == null ? void 0 : j.runs[0].text, autoMixId: ((U = (J = (G = (z = (X = (q = (F = e.header) == null ? void 0 : F.musicDetailHeaderRenderer.menu) == null ? void 0 : q.menuRenderer) == null ? void 0 : X.items[1]) == null ? void 0 : z.menuNavigationItemRenderer) == null ? void 0 : G.navigationEndpoint) == null ? void 0 : J.watchPlaylistEndpoint) == null ? void 0 : U.playlistId) || null } })(); return { items: o, releaseInfo: t } } function Xe(e, a, o) { const s = e.slice(); return s[17] = a[o], s[19] = o, s } function ze(e) { let a, o; return a = new st({ props: { item: e[17], idx: e[19] } }), a.$on("setPageIsPlaying", e[13]), { c() { Y(a.$$.fragment) }, l(s) { Z(a.$$.fragment, s) }, m(s, t) { ee(a, s, t), o = !0 }, p: it, i(s) { o || (P(a.$$.fragment, s), o = !0) }, o(s) { K(a.$$.fragment, s), o = !1 }, d(s) { te(a, s) } } } function Et(e) { var d, p; let a, o, s, t, g, u; a = new pt({ props: { title: e[3].title, desc: `${e[3].title} by ${(p = (d = e[3]) == null ? void 0 : d.artist[0]) == null ? void 0 : p.name} on MusicTunes`, url: e[1] + `?id=${e[0]}`, image: e[8] } }), t = new dt({ props: { thumbnail: e[8], buttons: [{ text: "Play Album", action: e[11], icon: "play" }, { text: "Album Radio", action: e[12], icon: "play" }, { icon: "dots", type: "icon" }], title: e[3].title, artist: e[3].artist, subtitles: e[3].subtitles, type: "release" } }), t.$on("shuffle", e[6]); let m = e[2], n = []; for (let i = 0; i < m.length; i += 1)n[i] = ze(Xe(e, m, i)); const b = i => K(n[i], 1, 1, () => { n[i] = null }); return { c() { Y(a.$$.fragment), o = je(), s = Ke("main"), Y(t.$$.fragment), g = je(); for (let i = 0; i < n.length; i += 1)n[i].c(); this.h() }, l(i) { Z(a.$$.fragment, i), o = Fe(i), s = Qe(i, "MAIN", { "data-testid": !0 }); var r = We(s); Z(t.$$.fragment, r), g = Fe(r); for (let c = 0; c < n.length; c += 1)n[c].l(r); r.forEach(W), this.h() }, h() { Ye(s, "data-testid", "release") }, m(i, r) { ee(a, i, r), qe(i, o, r), qe(i, s, r), ee(t, s, null), Ze(s, g); for (let c = 0; c < n.length; c += 1)n[c].m(s, null); u = !0 }, p(i, [r]) { const c = {}; if (r & 1 && (c.url = i[1] + `?id=${i[0]}`), a.$set(c), r & 20) { m = i[2]; let l; for (l = 0; l < m.length; l += 1) { const y = Xe(i, m, l); n[l] ? (n[l].p(y, r), P(n[l], 1)) : (n[l] = ze(y), n[l].c(), P(n[l], 1), n[l].m(s, null)) } for (at(), l = m.length; l < n.length; l += 1)b(l); et() } }, i(i) { if (!u) { P(a.$$.fragment, i), P(t.$$.fragment, i); for (let r = 0; r < m.length; r += 1)P(n[r]); u = !0 } }, o(i) { K(a.$$.fragment, i), K(t.$$.fragment, i), n = n.filter(Boolean); for (let r = 0; r < n.length; r += 1)K(n[r]); u = !1 }, d(i) { te(a, i), i && W(o), i && W(s), te(t), tt(n, i) } } } function It(e, a, o) { var E; let s; nt(e, ut, f => o(10, s = f)); let { data: t } = a, { data: g, id: u, path: m } = t; const n = bt(g); let { items: b, releaseInfo: d } = n; const p = () => lt.add(u), i = () => { p(), Q.initPlaylistSession({ playlistId: d.playlistId, index: 0 }), Q.updatePosition(0) }, r = () => { p(), Q.initPlaylistSession({ playlistId: `RDAMPL${d == null ? void 0 : d.playlistId}`, index: 0 }) }, c = () => { p(), Q.initPlaylistSession({ playlistId: d == null ? void 0 : d.autoMixId, params: "wAEB", index: 0 }) }; let l = (E = d == null ? void 0 : d.thumbnails[0]) == null ? void 0 : E.url.replace(/=(w(\d+))-(h(\d+))/g, "=w512-h512"); ct.set({ parentPlaylistId: d.playlistId, page: "release" }), mt.set({ page: "release" }); const y = () => i(), v = () => c(), w = () => p(); return e.$$set = f => { "data" in f && o(9, t = f.data) }, e.$$.update = () => { e.$$.dirty & 1024 && o(0, u = s.url.searchParams.get("id")) }, [u, m, b, d, p, i, r, c, l, t, s, y, v, w] } class xt extends Ge { constructor(a) { super(), Je(this, a, It, Et, Ue, { data: 9 }) } } export { xt as default };
