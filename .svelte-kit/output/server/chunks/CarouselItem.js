import{c as k,a as A,t as P,j as r,h as p,v as R,k as L}from"./index.js";import{g as N,P as B}from"./PopperButton.js";/* empty css                                     */import{l as c,C as d,s as _,n as C}from"./utils.js";import{s as M}from"./service.js";/* empty css                                  */import{S as G}from"./url.js";/* empty css                                          */function U({origin:l,title:i,type:s=null,id:o}){switch(s){case"MUSIC_PAGE_TYPE_ALBUM":return{url:`${l}/release?id=${o}`,title:i};case"MUSIC_PAGE_TYPE_ARTIST":return{title:i,url:`${l}/artist/${o}`};case"MUSIC_PAGE_TYPE_PLAYLIST":return{title:i,url:`${l}/playlist/${o}`};case"SESSION":return{title:i,url:`${l}/session?token=${o}`};default:return{url:`${l}/listen?id=${o}`,title:i}}}const O={code:'article.svelte-zs3tpa.svelte-zs3tpa{--thumbnail-radius:clamp(4px,calc(var(--column-width, 0px) - 32px) * 0.025,8px);contain:layout paint style;margin-bottom:1em;padding:.75em;scroll-snap-align:start;width:var(--column-width)}@media(hover:hover){article.svelte-zs3tpa:hover>.svelte-zs3tpa:where(.image):before{background:linear-gradient(rgba(0,0,0,.534),rgba(0,0,0,.11));opacity:.7;z-index:1}}.item-thumbnail-wrapper.svelte-zs3tpa.svelte-zs3tpa{display:block;margin-bottom:.5em;overflow:hidden;position:relative}.item-thumbnail-wrapper.img16x9.svelte-zs3tpa.svelte-zs3tpa{aspect-ratio:16/9}.item-thumbnail-wrapper.img1x1.svelte-zs3tpa.svelte-zs3tpa{aspect-ratio:1/1}.svelte-zs3tpa.svelte-zs3tpa:where(.item-title.isArtistKind){text-align:center}.svelte-zs3tpa.svelte-zs3tpa:where(.image.isArtistKind){border-radius:99999em!important;height:var(--thumbnail-size);width:var(--thumbnail-size)}a.svelte-zs3tpa.svelte-zs3tpa{color:inherit;transition:color .1s linear}a.svelte-zs3tpa.svelte-zs3tpa:hover{color:#eee}.svelte-zs3tpa.svelte-zs3tpa:where(.item-title){display:block}.svelte-zs3tpa.svelte-zs3tpa:where(.link){-webkit-line-clamp:2;-webkit-box-orient:vertical;display:block;display:-webkit-box;margin-bottom:.325em;overflow:hidden;text-overflow:ellipsis}.item1x1.svelte-zs3tpa.svelte-zs3tpa{position:relative}.item16x9.svelte-zs3tpa.svelte-zs3tpa{width:100%}.img1x1.svelte-zs3tpa.svelte-zs3tpa{aspect-ratio:1/1!important;height:var(--thumbnail-size);width:var(--thumbnail-size)}.img16x9.svelte-zs3tpa.svelte-zs3tpa{aspect-ratio:16/9!important;min-height:var(--thumbnail-size);min-width:calc(var(--column-width)*1);width:100%}.subtitles.svelte-zs3tpa.svelte-zs3tpa{-webkit-line-clamp:2;-webkit-box-orient:vertical;cursor:pointer;display:block;display:-webkit-box;overflow:hidden;text-overflow:ellipsis}.h1.svelte-zs3tpa.svelte-zs3tpa{display:inline;font-size:1em;font-weight:400!important;line-height:1.25}.image.svelte-zs3tpa.svelte-zs3tpa{align-items:center;border-radius:var(--thumbnail-radius);contain:paint;cursor:pointer;display:flex;min-height:100%;overflow:hidden;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none}.image.svelte-zs3tpa.svelte-zs3tpa:focus{border:none}.image.svelte-zs3tpa.svelte-zs3tpa:before{background-image:linear-gradient(rgba(0,0,0,.502),transparent,transparent);content:"";inset:0;opacity:.1;pointer-events:none;position:absolute;transition:background-image .1s linear,opacity .1s linear;z-index:1}.image.svelte-zs3tpa.svelte-zs3tpa:active:hover:before{background-image:linear-gradient(rgba(0,0,0,.589),rgba(0,0,0,.11));opacity:1}.image.svelte-zs3tpa>.svelte-zs3tpa:where(img){aspect-ratio:inherit;contain:content;height:inherit;height:100%;-o-object-fit:cover;object-fit:cover;-webkit-user-select:none;-moz-user-select:none;user-select:none;width:inherit;width:100%}@media screen and (max-width:640px){.image.svelte-zs3tpa.svelte-zs3tpa:before{background:linear-gradient(rgba(0,0,0,.534),rgba(0,0,0,.11));opacity:.7;z-index:1}}.svelte-zs3tpa.svelte-zs3tpa:where(.item){isolation:isolate}.svelte-zs3tpa:where(.image):hover+.svelte-zs3tpa:where(.item-menu){opacity:1!important}.svelte-zs3tpa.svelte-zs3tpa:where(.image):hover{box-shadow:0 -1px 27px -16px #000!important}.svelte-zs3tpa.svelte-zs3tpa:where(.image):hover:active:hover{box-shadow:0 -1px 27px -12px #000!important}.item-menu.svelte-zs3tpa.svelte-zs3tpa{isolation:isolate;margin:.25rem;opacity:0;position:absolute;right:0;top:0;transition:opacity .1s linear;z-index:5}.item-menu.svelte-zs3tpa.svelte-zs3tpa:focus-visible,.item-menu.svelte-zs3tpa.svelte-zs3tpa:focus-within,.item-menu.svelte-zs3tpa.svelte-zs3tpa:hover{opacity:1}@media screen and (max-width:640px){.item-menu.svelte-zs3tpa.svelte-zs3tpa{opacity:1}}@media screen and (hover:none){.item-menu.svelte-zs3tpa.svelte-zs3tpa{opacity:1}}.item-thumbnail.svelte-zs3tpa.svelte-zs3tpa{border-radius:var(--thumbnail-radius);contain:paint;cursor:pointer;height:100%;overflow:hidden;position:relative;position:absolute;top:0}.item-thumbnail.svelte-zs3tpa:focus-visible>.image.svelte-zs3tpa:before,.item-thumbnail.svelte-zs3tpa:focus-within>.image.svelte-zs3tpa:before,.item-thumbnail.svelte-zs3tpa:hover>.image.svelte-zs3tpa:before{background:linear-gradient(rgba(0,0,0,.534),rgba(0,0,0,.11));opacity:.7;z-index:1}.hidden.svelte-zs3tpa.svelte-zs3tpa{display:none!important;visibility:hidden!important}.image.svelte-zs3tpa.svelte-zs3tpa:focus,img.svelte-zs3tpa.svelte-zs3tpa:focus{outline:none}',map:null},T=/PLAYLIST|ALBUM|SINGLE/,j=/=w\d+-h\d+-/gm,K=["Favorite","Add to Queue","View Artist"],E=["Favorite","Play Next","View Artist"],J=k((l,i,s,o)=>{let u,h,g,x,y;g=A(c,t=>h=t),y=A(G,t=>x=t);let{index:v}=i,{item:e}=i,{type:w=""}=i,{kind:z=""}=i,{aspectRatio:b}=i,{isBrowseEndpoint:f=!1}=i;const m=!!(b?.includes("TWO_LINE_STACK")&&z!=="Fans might also like"||b?.includes("16_9"))?"16x9":"1x1";let n=[{text:"View Artist",icon:"artist",action:async()=>{try{const t=e.artistInfo?e.artistInfo.artist[0].browseId:e.subtitle[0].browseId;if(!t)throw new Error(`Expected a valid artistId string, received ${t}`);N(`/artist/${t}`),await P(),window.scrollTo({behavior:"smooth",top:0,left:0})}catch(t){d(`Error: ${t}`,"error")}}},{text:"Add to Queue",icon:"queue",action:function(){c.setTrackWillPlayNext(e,h.mix.length),d(`${e.title} has been added to your queue!`,"success")}},{text:"Play Next",icon:"queue",action(){c.setTrackWillPlayNext(e,h.position),d(`${e.title} will play next!`,"success")}},{text:"Add to Playlist",icon:"list-plus",action:async()=>{if(e.endpoint?.pageType.match(T)){const S=await(await fetch("/api/v1/get_queue.json?playlistId="+e.playlistId)).json();_.set({state:!0,item:[...S]})}else _.set({state:!0,item:e})}},{text:"Favorite",icon:"heart",action:()=>{M.sendMessage("create","favorite",e)}},C.hasActiveSession?{text:"Share Group Session",icon:"share",action:async()=>{}}:{text:"Start Group Session",icon:"users",action:async()=>{}},{text:"Share",icon:"share",action:async()=>{const t=U({origin:x,id:e.endpoint?.browseId??e.videoId,type:e.endpoint?.pageType??null,title:e.title});try{navigator.canShare?(await navigator.share(t),d("Shared successfully","success")):(await navigator.clipboard.writeText(t.url),d("Link copied successfully","success"))}catch(I){d("Error: "+I,"error")}}}],a=Array.isArray(e?.thumbnails)?e?.thumbnails.at(0):{width:0,height:0,url:"",placeholder:""};return i.index===void 0&&s.index&&v!==void 0&&s.index(v),i.item===void 0&&s.item&&e!==void 0&&s.item(e),i.type===void 0&&s.type&&w!==void 0&&s.type(w),i.kind===void 0&&s.kind&&z!==void 0&&s.kind(z),i.aspectRatio===void 0&&s.aspectRatio&&b!==void 0&&s.aspectRatio(b),i.isBrowseEndpoint===void 0&&s.isBrowseEndpoint&&f!==void 0&&s.isBrowseEndpoint(f),l.css.add(O),(w==="artist"||e.endpoint&&e.endpoint.pageType?.includes("MUSIC_PAGE_TYPE_ARTIST"))&&(n=n.filter(t=>K.includes(t.text))),e.endpoint?.pageType&&(n=e?.endpoint?.pageType.match(T)?[{action:()=>{c.initPlaylistSession({playlistId:e.playlistId,params:"wAEB8gECKAE%3D",index:0})},icon:"shuffle",text:"Shuffle"},{action:()=>{c.setTrackWillPlayNext(e,h.position)},icon:"queue",text:"Play Next"},{action:()=>{c.initPlaylistSession({playlistId:"RDAMPL"+e.playlistId,params:"wAEB8gECeAE%3D",index:0})},icon:"radio",text:"Start Radio"},...n.filter(t=>!E.includes(t.text))]:n.filter(t=>E.includes(t.text))),a.url=a.width<100?a.url.replace(j,"=w240-h240-"):a.url,u=z==="Fans might also like",g(),y(),`





<article class="${"item item"+r(m,!0)+" svelte-zs3tpa"}"><section class="${"item-thumbnail-wrapper img"+r(m,!0)+" svelte-zs3tpa"}"><section class="${["item-thumbnail img"+r(m,!0)+" svelte-zs3tpa",u?"isArtistKind":""].join(" ").trim()}"><div class="${["image img"+r(m,!0)+" svelte-zs3tpa"," "+(u?"isArtistKind":"")].join(" ").trim()}" tabindex="0">
				<img alt="${"thumbnail img"+r(m,!0)}"${p("loading",v>=3?"lazy":null,0)}${p("width",a.width,0)}${p("height",a.height,0)}${p("src",v>=3?a.placeholder:a.url,0)}${p("data-src",v>=3?a.url:null,0)} class="svelte-zs3tpa"></div>
			<div class="item-menu svelte-zs3tpa">${R(B,"PopperButton").$$render(l,{tabindex:0,items:n},{},{})}</div></section></section>
	<div class="${["item-title svelte-zs3tpa",u?"isArtistKind":""].join(" ").trim()}"><span class="h1 link svelte-zs3tpa">${r(e.title)}</span>
		${e.subtitle?`<div class="subtitles secondary svelte-zs3tpa">${L(e.subtitle,t=>`${t?.browseId?`<a${p("href","/artist/"+t?.browseId,0)} class="svelte-zs3tpa"><span class="svelte-zs3tpa">${r(t.text)}</span></a>`:`<span class="svelte-zs3tpa">${r(t.text)}</span>`}`)}</div>`:""}</div>
</article>`});export{J as C};
