import{b as l}from"../../../../chunks/request.js";import{e as p}from"../../../../chunks/index2.js";import{M as c}from"../../../../chunks/musicResponsiveListItemRenderer.js";import{M as R}from"../../../../chunks/musicTwoRowItemRenderer.js";import{i as u}from"../../../../chunks/utils.js";function m({header:t={},items:n=[],visitorData:o=""}){t="musicImmersiveHeaderRenderer"in t?t.musicImmersiveHeaderRenderer:t?.musicVisualHeaderRenderer;const i={},r=[];return u(n,(e,d)=>{if(e.musicShelfRenderer){const s=b(e.musicShelfRenderer.contents);i.items=s,i.header=e.musicShelfRenderer?e.musicShelfRenderer?.bottomEndpoint?.browseEndpoint:void 0}if(e.musicCarouselShelfRenderer){const s=E(e.musicCarouselShelfRenderer.contents,e.musicCarouselShelfRenderer.header.musicCarouselShelfBasicHeaderRenderer);r.push(s)}}),{header:v(t),body:{carousels:r,songs:i},visitorData:o}}function b(t=[]){return u(t,(n,o)=>{t[o]=c(n)}),t}function E(t=[],n){let o=!1;const i=[];u(t,d=>i.push(R(d))),n.moreContentButton&&n.moreContentButton.buttonRenderer&&(o=!0);let r=n.title.runs[0],a=o&&n.moreContentButton.buttonRenderer.navigationEndpoint.browseEndpoint;const e={title:r.text,endpoint:r.navigationEndpoint??void 0,itct:o&&encodeURIComponent(n?.moreContentButton?.buttonRenderer?.trackingParams)||void 0,browseId:o?a.browseId:void 0,params:o?a.params:void 0,type:r.text};return r=null,a=null,{header:e,contents:i}}function v(t){const n=!!t.playButton,o=!!t.startRadioButton;return{name:t.title.runs[0].text||null,description:t.description?t.description.runs[0].text:void 0,foregroundThumbnails:t.foregroundThumbnail?t.foregroundThumbnail.musicThumbnailRenderer.thumbnail.thumbnails:void 0,thumbnails:t.thumbnail?t.thumbnail.musicThumbnailRenderer.thumbnail.thumbnails:[],buttons:{radio:o?{params:t.startRadioButton.buttonRenderer.navigationEndpoint.watchPlaylistEndpoint?t.startRadioButton.buttonRenderer.navigationEndpoint.watchPlaylistEndpoint.params:t.startRadioButton.buttonRenderer.navigationEndpoint.watchEndpoint?t.startRadioButton.buttonRenderer.navigationEndpoint.watchEndpoint.params:void 0,playlistId:t.startRadioButton.buttonRenderer.navigationEndpoint.watchPlaylistEndpoint?t.startRadioButton.buttonRenderer.navigationEndpoint.watchPlaylistEndpoint.playlistId:t.startRadioButton.buttonRenderer.navigationEndpoint.watchEndpoint?t.startRadioButton.buttonRenderer.navigationEndpoint.watchEndpoint.playlistId:void 0}:null,shuffle:n&&t.playButton.buttonRenderer.navigationEndpoint&&{params:t.playButton.buttonRenderer.navigationEndpoint.watchEndpoint?t.playButton.buttonRenderer.navigationEndpoint.watchEndpoint.params:t.playButton.buttonRenderer.navigationEndpoint.watchPlaylistEndpoint.params??void 0,playlistId:t.playButton.buttonRenderer.navigationEndpoint.watchEndpoint?t.playButton.buttonRenderer.navigationEndpoint.watchEndpoint.playlistId:t.playButton.buttonRenderer.navigationEndpoint.watchPlaylistEndpoint.playlistId??void 0,videoId:t.playButton.buttonRenderer.navigationEndpoint.watchEndpoint?t.playButton.buttonRenderer.navigationEndpoint.watchEndpoint.videoId:void 0}}}}const h=async({params:t})=>{const n=await l("artist",{context:{client:{clientName:"WEB_REMIX",clientVersion:"1.20220404.01.00"}},headers:null,params:{browseId:t.slug,browseEndpointContextMusicConfig:{browseEndpointContextMusicConfig:{pageType:"MUSIC_PAGE_TYPE_ARTIST"}}}}),o=await n.json();if(!n.ok)throw p(500,n.statusText);const i=g(o);return Object.assign(i)};function g(t){const n=t?.header,o=t?.contents?.singleColumnBrowseResultsRenderer?.tabs[0]?.tabRenderer?.content?.sectionListRenderer?.contents,i=t?.responseContext?.visitorData??"";return m({header:n,items:o,visitorData:i??""})}export{h as load};
