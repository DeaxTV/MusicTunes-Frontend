import{j as u}from"../../../../chunks/index2.js";import{b}from"../../../../chunks/request.js";import{M as R}from"../../../../chunks/musicResponsiveListItemRenderer.js";import{M as c}from"../../../../chunks/musicTwoRowItemRenderer.js";import"../../../../chunks/index.js";import"../../../../chunks/utils.js";const B=async({url:t,params:e})=>{const{slug:o}=e,a=await(await b("browse",{context:{client:{clientName:"WEB_REMIX",clientVersion:"1.20220404.01.00"}},params:{browseId:"FEmusic_moods_and_genres_category",params:o}})).json();let{header:{musicHeaderRenderer:{title:{runs:[{text:d=""}={}]=[]}={}}={}}={},contents:{singleColumnBrowseResultsRenderer:{tabs:[{tabRenderer:{content:{sectionListRenderer:{contents:p=[]}={}}={}}={}}={}]=[]}={}}={}}=await a,i=[],m=[],s=[];for(let n=0;n<p.length;n++){const r={...p[n]};r?.musicCarouselShelfRenderer&&i.push(r),r?.gridRenderer&&m.push(r)}if(i.length!==0){if(s=i.map(({musicCarouselShelfRenderer:n},r)=>f({musicCarouselShelfRenderer:n})),s.length!==0)return u({data:a,sections:s,header:d,type:"carousel"})}else return s=m.map(({gridRenderer:n={}})=>{const{items:r=[],header:l={}}=n;return{section:r.map(w=>c(w)),title:l?.gridHeaderRenderer?.title?.runs[0]?.text}}),u({sections:s,header:d,type:"grid"})};function g(t){return t.map(({musicCarouselShelfBasicHeaderRenderer:e}={})=>{const o={};return e?.moreContentButton?.buttonRenderer?.navigationEndpoint?.browseEndpoint?.browseId&&(o.browseId=e?.moreContentButton?.buttonRenderer?.navigationEndpoint?.browseEndpoint?.browseId),e?.moreContentButton?.buttonRenderer?.navigationEndpoint?.browseEndpoint?.params&&(o.params=e?.moreContentButton?.buttonRenderer?.navigationEndpoint?.browseEndpoint?.params),o.title=e.title.runs[0].text,o})}function E(t){return t.map(({...e})=>{if(e.musicTwoRowItemRenderer)return c(e);if(e.musicResponsiveListItemRenderer)return R(e);throw new Error(`Unable to parse items, can't find ${e}`)})}function f({musicCarouselShelfRenderer:t}){return{header:g([t.header])[0],results:E(t.contents)}}export{B as GET};
