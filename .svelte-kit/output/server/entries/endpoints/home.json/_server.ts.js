import{b as R}from"../../../chunks/request.js";import{M as h}from"../../../chunks/musicResponsiveListItemRenderer.js";import{M as I}from"../../../chunks/musicTwoRowItemRenderer.js";import{f as l}from"../../../chunks/utils.js";import"../../../chunks/index.js";import{M as C}from"../../../chunks/parsers.js";import{e as g,j as d}from"../../../chunks/index2.js";const A=async({url:n})=>{const e=n.searchParams;let t=e.get("ctoken")||"",o=e.get("itct")||"";o=decodeURIComponent(o),t=decodeURIComponent(t);const a=e.get("visitorData")||"",u="FEmusic_home",s=await R("home",{context:{client:{visitorData:`${a}`,clientName:"WEB_REMIX",clientVersion:"1.20220404.01.00",hl:"en",userAgent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/95.0.4638.54 Safari/537.36 Edg/95.0.1020.40,gzip(gfe)"}},headers:null,params:{browseId:t===""?u:""},continuation:t!==""&&{ctoken:t,continuation:t,type:"next",itct:o}}).then(r=>{if(!r.ok)throw g(r.status,r.statusText);return r.json()}),i=s.responseContext?.visitorData;if(t==="")return w(s,i);const c=s.continuationContents?.sectionListContinuation,p=c.contents,f=Array.isArray(c?.continuations)?c.continuations[0]?.nextContinuationData:{},b=l(p,r=>{if("musicCarouselShelfRenderer"in r)return m(r)},Boolean);return d({carousels:b,continuations:f})};function w(n,e){let t=n.background?.musicThumbnailRenderer?.thumbnail?.thumbnails??[];const o=n.contents?.singleColumnBrowseResultsRenderer?.tabs[0]?.tabRenderer?.content?.sectionListRenderer,a=o.contents||[],u=o.continuations[0]?.nextContinuationData,s=l(a,i=>{if("musicCarouselShelfRenderer"in i)return m(i);if("musicImmersiveCarouselShelfRenderer"in i)return t=i.musicImmersiveCarouselShelfRenderer.backgroundImage?.simpleVideoThumbnailRenderer?.thumbnail?.thumbnails||[],m(i)},Boolean);return d({carousels:s,headerThumbnail:t,visitorData:e,continuations:u})}function v({musicCarouselShelfBasicHeaderRenderer:n}){if(n){let e,t;return n?.strapline?.runs[0]?.text&&(e=n.strapline.runs[0].text),n?.moreContentButton?.buttonRenderer?.navigationEndpoint?.browseEndpoint?.browseId&&(t=n?.moreContentButton?.buttonRenderer?.navigationEndpoint?.browseEndpoint?.browseId),{title:n.title.runs[0].text,subheading:e,browseId:t}}}function x(n=[]){return n.map(t=>{if("musicTwoRowItemRenderer"in t)return I(t);if("musicResponsiveListItemRenderer"in t)return h(t);if("musicNavigationButtonRenderer"in t)return C(t)})}function m(n){const e=n?.musicCarouselShelfRenderer??n?.musicImmersiveCarouselShelfRenderer,t=v(e?.header),o=x(e?.contents);return{header:t,items:o}}export{A as GET};
