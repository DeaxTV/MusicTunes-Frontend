import{j as u,e as p}from"../../../../../chunks/index2.js";import{M as h}from"../../../../../chunks/musicResponsiveListItemRenderer.js";import{M as R}from"../../../../../chunks/musicTwoRowItemRenderer.js";import"../../../../../chunks/index.js";import"../../../../../chunks/utils.js";import{b as f}from"../../../../../chunks/request.js";const T=async({url:l})=>{try{const s=[],t={},m=l.searchParams.get("browseId"),i=await(await f("related",{context:{client:{clientName:"WEB_REMIX",clientVersion:"1.20220404.01.00"}},headers:null,params:{browseId:m,params:void 0,browseEndpointContextMusicConfig:{browseEndpointContextMusicConfig:{pageType:"MUSIC_PAGE_TYPE_TRACK_RELATED"}}}})).json(),c=Array.isArray(i?.contents?.sectionListRenderer?.contents)?i?.contents?.sectionListRenderer?.contents:[];let a=c.length;for(;--a>-1;){const e=c[a];if(e?.musicCarouselShelfRenderer){const n={},o=[];let d=e?.musicCarouselShelfRenderer?.contents?.length;for(;--d>-1;){const r=e?.musicCarouselShelfRenderer?.contents[d];r?.musicTwoRowItemRenderer&&o.unshift(R(r)),r?.musicResponsiveListItemRenderer&&o.unshift(h(r))}n.items=o,n.header={title:e?.musicCarouselShelfRenderer?.header?.musicCarouselShelfBasicHeaderRenderer?.title?.runs[0]?.text},s.push(n)}e?.musicDescriptionShelfRenderer&&(t.header=e?.musicDescriptionShelfRenderer?.header?.runs[0]?.text,t.description=e?.musicDescriptionShelfRenderer?.description?.runs[0]?.text)}return u({carousels:s,description:t})}catch(s){throw console.error(s),p(500,s)}};export{T as GET};
